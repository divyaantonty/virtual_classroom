<!DOCTYPE html>
<html lang="en">

<head>
    <title>Teacher Registration</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    {% load static %}

    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,700,900" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'fonts/icomoon/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery-ui.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery.fancybox.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}">
    <link rel="stylesheet" href="{% static 'fonts/flaticon/font/flaticon.css' %}">
    <link rel="stylesheet" href="{% static 'css/aos.css' %}">
    <link href="{% static 'css/jquery.mb.YTPlayer.min.css' %}" media="all" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <style>
        .error-message {
            margin-top: 5px;
        }
    </style>

</head>

<body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">

    <div class="site-wrap">

        <div class="py-2 bg-light">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-9 d-none d-lg-block">
                        <a href="#" class="small mr-3"><span class="icon-question-circle-o mr-2"></span> Have a question?</a>
                    </div>
                    <div class="col-lg-3 text-right">
                        <a href="{% url 'login' %}" class="small mr-3"><span class="icon-unlock-alt"></span> Log In</a>
                        <a href="{% url 'register' %}" class="small btn btn-primary px-4 py-2 rounded-0"><span class="icon-users"></span> Register</a>
                    </div>
                </div>
            </div>
        </div>

        <header class="site-navbar py-4 js-sticky-header site-navbar-target" role="banner">
            <div class="container">
                <div class="d-flex align-items-center">
                    <div class="site-logo">
                        <a href="{% url 'index' %}" class="d-block">
                            <img src="{% static 'images/logo.png' %}" alt="Image" class="img-fluid">
                        </a>
                    </div>
                    <div class="mr-auto">
                        <nav class="site-navigation position-relative text-right" role="navigation">
                            <ul class="site-menu main-menu js-clone-nav mr-auto d-none d-lg-block">
                                <li><a href="{% url 'index' %}" class="nav-link text-left">Home</a></li>
                                <li class="has-children">
                                    <a href="{% url 'about' %}" class="nav-link text-left">About Us</a>
                                    <ul class="dropdown">
                                        <li><a href="{% url 'teachers' %}">Our Teachers</a></li>
                                        <li><a href="{% url 'about' %}">Our School</a></li>
                                    </ul>
                                </li>
                                <li><a href="{% url 'admissions' %}" class="nav-link text-left">Admissions</a></li>
                                <li><a href="{% url 'courses' %}" class="nav-link text-left">Courses</a></li>
                                <li><a href="{% url 'contact' %}" class="nav-link text-left">Contact</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </header>

        <div class="site-section ftco-subscribe-1 site-blocks-cover pb-4" style="background-image: url('{% static 'images/bg_1.jpg' %}')">
            <div class="container">
                <div class="row align-items-end justify-content-center text-center">
                    <div class="col-lg-7">
                        <h2 class="mb-0">Teacher Registration</h2>
                        <p>Fill out the form to register as a teacher.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="custom-breadcrumbs border-bottom">
            <div class="container">
                <a href="{% url 'index' %}">Home</a>
                <span class="mx-3 icon-keyboard_arrow_right"></span>
                <span class="current">Teacher Registration</span>
            </div>
        </div>


        <div class="site-section">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        {% if messages %}
                        <div class="alert alert-danger">
                            <ul class="messages">
                                {% for message in messages %}
                                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    {% endif %}
                    
                    <form action="{% url 'register_teacher' %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        {{ form.as_p }} 
                            <div class="form-row">
                                <div class="col-md-6 form-group">
                                    <label for="first-name">First Name <span class="required">*</span></label>
                                    <input type="text" id="first-name" name="first_name" class="form-control" required>
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-6 form-group">
                                    <label for="last-name">Last Name <span class="required">*</span></label>
                                    <input type="text" id="last-name" name="last_name" class="form-control" required>
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-6 form-group">
                                    <label for="gender">Gender <span class="required">*</span></label>
                                    <select id="gender" name="gender" class="form-control" required>
                                        <option value="">Select Gender</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                        <option value="other">Other</option>
                                    </select>
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-6 form-group">
                                    <label for="dob">Date of Birth <span class="required">*</span></label>
                                    <input type="date" id="dob" name="dob" class="form-control" required>
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-12 form-group">
                                    <label for="email">E-mail <span class="required">*</span></label>
                                    <input type="email" id="email" name="email" class="form-control" placeholder="ex: myname@gmail.com" required>
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-12 form-group">
                                    <label for="contact">Contact <span class="required">*</span></label>
                                    <input type="text" id="contact" name="contact" class="form-control" required>
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-12 form-group">
                                    <label for="address">Address</label>
                                    <input type="text" id="address" name="address_line1" class="form-control" placeholder="Street Address">
                                    <div class="error-message text-danger"></div>
                                    <input type="text" id="address2" name="address_line2" class="form-control" placeholder="Street Address Line 2">
                                    <div class="error-message text-danger"></div>
                                    <input type="text" id="city" name="city" class="form-control" placeholder="City">
                                    <div class="error-message text-danger"></div>
                                    <input type="text" id="state" name="state" class="form-control" placeholder="State / Province">
                                    <div class="error-message text-danger"></div>
                                    <input type="text" id="zip" name="zip_code" class="form-control" placeholder="Postal / Zip Code">
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-12 form-group">
                                    <label for="qualification">Qualification <span class="required">*</span></label>
                                    <input type="text" id="qualification" name="qualification" class="form-control" required>
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-12 form-group">
                                    <label for="qualification_certificate">Qualification Certificate <span class="required">*</span></label>
                                    <input type="file" id="qualification_certificate" name="qualification_certificate" class="form-control-file" required accept=".pdf">
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-12 form-group">
                                    <label for="experience">Experience <span class="required">*</span></label>
                                    <select id="experience" name="experience" class="form-control" required>
                                        <option value="">Select Experience</option>
                                        <option value="0">0 years</option>
                                        <option value="0-2">0-2 years</option>
                                        <option value="2-5">2-5 years</option>
                                        <option value="5+">5+ years</option>
                                    </select>
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-12 form-group" id="experience_certificate_group" style="display: none;">
                                    <label for="experience_certificate">Experience Certificate</label>
                                    <input type="file" id="experience_certificate" name="experience_certificate" class="form-control-file" accept=".pdf">
                                    <div class="error-message text-danger"></div>
                                </div>
                                <div class="col-md-12 form-group">
                                    <button type="submit" class="btn btn-primary btn-lg rounded-0">Register</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector("form");
        const experienceSelect = document.getElementById("experience");
        const experienceCertificateGroup = document.getElementById("experience_certificate_group");
    
        // Validation functions
        function showError(input, message) {
            const errorElement = input.nextElementSibling;
            errorElement.textContent = message;
            input.classList.add("is-invalid");
            input.classList.remove("is-valid");
        }
    
        function clearError(input) {
            const errorElement = input.nextElementSibling;
            errorElement.textContent = "";
            input.classList.remove("is-invalid");
            input.classList.add("is-valid");
        }
    
        // Validate functions (you can simplify this as needed)
        function validateDropdown(input) {
            if (input.value === "") {
                showError(input, "Please select an option.");
            } else {
                clearError(input);
            }
        }
    
        function validateName(input) {
            const namePattern = /^[A-Z][a-z]{2,}$/;
            if (!namePattern.test(input.value)) {
                showError(input, "Name must start with a capital letter, have at least 3 characters, and no spaces.");
            } else {
                clearError(input);
            }
        }
    
        function validateDOB(input) {
            const dob = new Date(input.value);
            const today = new Date();
            const age = today.getFullYear() - dob.getFullYear();
            if (age < 23 || age > 56) {
                showError(input, "Age must be between 23 and 56 years old.");
            } else {
                clearError(input);
            }
        }
    
        function validateEmail(input) {
            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailPattern.test(input.value)) {
                showError(input, "Please enter a valid email address.");
            } else {
                clearError(input);
            }
        }
    
        function validateContact(input) {
            const contactPattern = /^[6-9]\d{9}$/;
            if (!contactPattern.test(input.value)) {
                showError(input, "Contact must start with 6-9 and be exactly 10 digits.");
            } else {
                clearError(input);
            }
        }
    
        function validateQualification(input) {
            const qualificationPattern = /^[A-Z][a-zA-Z\s]{2,}$/;
            if (!qualificationPattern.test(input.value)) {
                showError(input, "Qualification must start with a capital letter and have at least 3 characters.");
            } else {
                clearError(input);
            }
        }
    
        function validateZip(input) {
            const zipPattern = /^\d{6}$/;
            if (!zipPattern.test(input.value)) {
                showError(input, "Zip code must be exactly 6 digits.");
            } else {
                clearError(input);
            }
        }
    
        function validateFile(input) {
            if (input.files.length > 0) {
                const fileName = input.files[0].name;
                const fileExtension = fileName.split('.').pop().toLowerCase();
                if (fileExtension !== 'pdf') {
                    showError(input, "Please upload a PDF file.");
                } else {
                    clearError(input);
                }
            } else {
                showError(input, "This field is required.");
            }
        }
    
        // Add event listeners for real-time validation
        document.getElementById("first-name").addEventListener("input", function() { validateName(this); });
        document.getElementById("last-name").addEventListener("input", function() { validateName(this); });
        document.getElementById("dob").addEventListener("change", function() { validateDOB(this); });
        document.getElementById("email").addEventListener("input", function() { validateEmail(this); });
        document.getElementById("contact").addEventListener("input", function() { validateContact(this); });
        document.getElementById("qualification").addEventListener("input", function() { validateQualification(this); });
        document.getElementById("zip").addEventListener("input", function() { validateZip(this); });
        document.getElementById("qualification_certificate").addEventListener("change", function() { validateFile(this); });
        document.getElementById("experience_certificate").addEventListener("change", function() { validateFile(this); });
        document.getElementById("gender").addEventListener("change", function() { validateDropdown(this); });
        document.getElementById("experience").addEventListener("change", function() { 
            validateDropdown(this);
            if (this.value !== "0") {
                experienceCertificateGroup.style.display = "block";
                document.getElementById("experience_certificate").required = true;
            } else {
                experienceCertificateGroup.style.display = "none";
                clearError(document.getElementById("experience_certificate"));
                document.getElementById("experience_certificate").required = false;
            }
        });
    
        // Validate all fields on form submission
        form.addEventListener("submit", function(event) {
            const inputs = [
                "first-name", "last-name", "dob", "email", "contact", 
                "qualification", "zip", "gender", "experience"
            ];
            inputs.forEach(id => validateDropdown(document.getElementById(id)));
            // Add more validations as needed for your inputs
        });
    });
    
</script>
